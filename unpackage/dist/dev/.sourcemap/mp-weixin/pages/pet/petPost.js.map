{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/54771/Desktop/PetDaily/pages/pet/petPost.vue?c118","webpack:///C:/Users/54771/Desktop/PetDaily/pages/pet/petPost.vue?2846","webpack:///C:/Users/54771/Desktop/PetDaily/pages/pet/petPost.vue?a03f","webpack:///C:/Users/54771/Desktop/PetDaily/pages/pet/petPost.vue?ba75","uni-app:///pages/pet/petPost.vue","webpack:///C:/Users/54771/Desktop/PetDaily/pages/pet/petPost.vue?0801"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uIcon","uAlbum","uToast","uPopup","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","l0","_self","_c","__map","comments","item","index","$orig","__get_orig","g0","replies","length","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","albumWidth","shouldFocus","urls2","commentPopup","showPopup","isSubmitting","posts","total_comments","total_replies","comment","postID","replyingTo","replyingCommentId","showReplies","userId","list","type","onLoad","onReady","methods","onReplyClick","handlePopupOpen","closePopup","back","uni","url","toggleReplies","sendToast","showToast","params","deleteMyPost","api","response","setTimeout","handleSubmit","isReply","content","post_id","comment_id","deleteCommentBtn","getUserInfo","submitContent","getPostList","addLike","getCommentList","toggleCheck"],"mappings":"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","file":"pages/pet/petPost.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/pet/petPost.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./petPost.vue?vue&type=template&id=11cd2606&scoped=true&\"\nvar renderjs\nimport script from \"./petPost.vue?vue&type=script&lang=js&\"\nexport * from \"./petPost.vue?vue&type=script&lang=js&\"\nimport style0 from \"./petPost.vue?vue&type=style&index=0&id=11cd2606&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11cd2606\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/pet/petPost.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./petPost.vue?vue&type=template&id=11cd2606&scoped=true&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    \"u-Text\": function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u--text/u--text\" */ \"@/uni_modules/uview-ui/components/u--text/u--text.vue\"\n      )\n    },\n    uAlbum: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-album/u-album\" */ \"@/uni_modules/uview-ui/components/u-album/u-album.vue\"\n      )\n    },\n    uToast: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-toast/u-toast\" */ \"@/uni_modules/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    },\n    \"u-Input\": function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u--input/u--input\" */ \"@/uni_modules/uview-ui/components/u--input/u--input.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.comments, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var g0 = item.replies.length\n    return {\n      $orig: $orig,\n      g0: g0,\n    }\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./petPost.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./petPost.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t\t<!-- 标题 -->\r\n\t\t<view class=\"detail-title\">\r\n\t\t\t<view class=\"text\" @click=\"back\">\r\n\t\t\t\t<u-icon color=\"#000\" size=\"20\" name=\"arrow-left\"></u-icon>\r\n\t\t\t\t<view class=\"\" style=\"margin-left: 30rpx;\">\r\n\t\t\t\t\t帖子详情\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 帖子 -->\r\n\t\t<view class=\"post\" v-for=\"(item, index) in posts\" :key=\"index\">\r\n\t\t\t<!-- 头像部分 -->\r\n\t\t\t<view class=\"post-title\">\r\n\t\t\t\t<view class=\"avatar\">\r\n\t\t\t\t\t<!-- <view > -->\r\n\t\t\t\t\t<img class=\"avatar-img\" :src=\"item.user_pic\" alt=\"\">\r\n\t\t\t\t\t<!-- </view> -->\r\n\t\t\t\t\t<view class=\"avatar-name\">\r\n\t\t\t\t\t\t<view class=\"name-text\">\r\n\t\t\t\t\t\t\t{{ item.username }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"name-cat\">\r\n\t\t\t\t\t\t\t{{ item.created_at }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 文字内容 -->\r\n\t\t\t<view class=\"content-text\">\r\n\t\t\t\t<u--text margin=\"0 0 8px 0\" :text=\"item.content\"></u--text>\r\n\t\t\t</view>\r\n\t\t\t<!-- 图片内容 -->\r\n\t\t\t<view class=\"img\">\r\n\t\t\t\t<u-album :urls=\"urls2\" rowCount=\"3\" multipleSize=\"80px\"></u-album>\r\n\t\t\t</view>\r\n\t\t\t<!-- 点赞/删除 -->\r\n\t\t\t<view class=\"like\">\r\n\t\t\t\t<view v-if=\"userId === item.user_id\" class=\"icon\" @click=\"deleteMyPost(item.id)\">\r\n\t\t\t\t\t<u-icon size=\"20\" name=\"trash\" color=\"#000\"></u-icon>\r\n\t\t\t\t\t<span>删除</span>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"icon\" @click.stop=\"toggleCheck(index, item.id)\">\r\n\t\t\t\t\t<img class=\"icon-img\" :src=\"item.liked ? '../../static/dianzan_1.png':'../../static/dianzan.png'\" />\r\n\t\t\t\t\t<view class=\"count\">\r\n\t\t\t\t\t\t{{ item.like_count }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 总评论 -->\r\n\t\t<view class=\"post\" style=\"margin-bottom: 200rpx;\">\r\n\t\t\t<view class=\"title\">\r\n\t\t\t\t<view class=\"text\" style=\"margin: 20rpx 0rpx;\">\r\n\t\t\t\t\t评论 {{total_comments+total_replies}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 头像部分 -->\r\n\t\t\t<view class=\"comment-title\" v-for=\"(item,index) in comments\" :key=\"index\">\r\n\t\t\t\t<view class=\"comments\">\r\n\t\t\t\t\t<img class=\"avatar-img\" :src=\"item.user_pic\" alt=\"\">\r\n\t\t\t\t\t<view class=\"comment-name\">\r\n\t\t\t\t\t\t<view class=\"name-text\" style=\"color: #3f3f3f;\">\r\n\t\t\t\t\t\t\t{{item.username}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"name-cat\" style=\"\">\r\n\t\t\t\t\t\t\t{{item.comment_created_at}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 文字内容 -->\r\n\t\t\t\t\t\t<view class=\"comment-text\">\r\n\t\t\t\t\t\t\t{{item.comment_content}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view style=\"display: flex;\">\r\n\t\t\t\t\t\t\t<!-- \"回复\" 按钮 -->\r\n\t\t\t\t\t\t\t<view style=\" margin-right: 30rpx;\" class=\"click-btn\"\r\n\t\t\t\t\t\t\t\t@click=\"onReplyClick(item.comment_id, item.username)\">\r\n\t\t\t\t\t\t\t\t<u-icon size=\"18\" name=\"chat\"></u-icon>\r\n\t\t\t\t\t\t\t\t<span>回复</span>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- \"删除\" 按钮 -->\r\n\t\t\t\t\t\t\t<view v-show=\"userId === item.comment_user_id\">\r\n\t\t\t\t\t\t\t\t<view class=\"click-btn\" @click=\"deleteCommentBtn(item.comment_id)\">\r\n\t\t\t\t\t\t\t\t\t<u-icon size=\"18\" name=\"trash\"></u-icon>\r\n\t\t\t\t\t\t\t\t\t<span>删除</span>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"check-comment\" v-if=\"item.replies.length>0\" @click=\"toggleReplies(index)\">\r\n\t\t\t\t\t\t\t{{ showReplies[index] ? '点击收起回复' : '点击查看回复' }}\r\n\t\t\t\t\t\t\t<u-icon size=\"20\" :name=\"showReplies[index] ? 'arrow-up-fill' : 'arrow-down-fill'\"\r\n\t\t\t\t\t\t\t\tcolor=\"#ffd117\">\r\n\t\t\t\t\t\t\t</u-icon>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 回复列表 -->\r\n\t\t\t\t\t\t<view class=\"reply-list\" v-if=\"showReplies[index]\">\r\n\t\t\t\t\t\t\t<view v-for=\"(reply,index) in item.replies\" :key=\"reply.id\" style=\"margin-bottom: 10rpx;\">\r\n\t\t\t\t\t\t\t\t<span style=\"color: #ffa915; margin-right: 10rpx;\">{{reply.username}}:</span>\r\n\t\t\t\t\t\t\t\t<span style=\"color: #3f3f3f;\"> {{ reply.reply_content }}</span>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<u-toast ref=\"uToast\"></u-toast>\r\n\t\t<!-- 评论的输入框-->\r\n\t\t<view class=\"fixed\">\r\n\t\t\t<u--input v-model=\"comment\" :placeholder=\"'快来发表评论吧!(ง •_•)ง'\" suffixIconStyle=\"color: #909399\" @confirm=\"handleSubmit({ type: 'comment' });\r\n\"></u--input>\r\n\t\t</view>\r\n\t\t<!-- 回复评论弹出的输入框 -->\r\n\t\t<u-popup :show=\"showPopup\" @close=\"closePopup\" @open=\"handlePopupOpen\" :round=\"10\" closeOnClickOverlay=\"true\"\r\n\t\t\toverlayOpacity=\"0.1\">\r\n\t\t\t<view class=\"box-popup\">\r\n\t\t\t\t<img src=\"https://www.serverzhu.com/petImg/%E7%BB%84%2034.png\" class=\"img-popup\">\r\n\t\t\t\t<u--input v-model=\"commentPopup\" :placeholder=\"'回复 ' + replyingTo + ' 的评论...'\"\r\n\t\t\t\t\tsuffixIconStyle=\"color: #909399\" :focus=\"shouldFocus\" @confirm=\"handleSubmit({ type: 'reply' });\"\r\n\t\t\t\t\t:showConfirmBar=\"false\" />\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport api from '../../utils/api.js';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\talbumWidth: 0,\r\n\t\t\t\tshouldFocus: false, // 控制是否聚焦\r\n\t\t\t\turls2: [],\r\n\t\t\t\tcommentPopup: '',\r\n\t\t\t\tshowPopup: false,\r\n\t\t\t\tisSubmitting: false, // 防抖锁\r\n\t\t\t\tposts: [],\r\n\t\t\t\tcomments: [],\r\n\t\t\t\ttotal_comments: '',\r\n\t\t\t\ttotal_replies: '',\r\n\t\t\t\tcomment: \"\", // 绑定输入框内容\r\n\t\t\t\tpostID: 0,\r\n\t\t\t\treplyingTo: null, // 存储正在回复的用户名\r\n\t\t\t\treplyingCommentId: null, // 存储当前正在回复的 comment_id\r\n\t\t\t\tshowReplies: {}, // 用对象存储每个评论的展开状态\r\n\t\t\t\tuserId: 0,\r\n\t\t\t\tlist: [{\r\n\t\t\t\t\ttype: \"\",\r\n\t\t\t\t\tmessage: \"\",\r\n\t\t\t\t}, ],\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tthis.getUserInfo()\r\n\t\t\tthis.postID = options.id\r\n\t\t\tthis.getPostList(this.postID)\r\n\t\t\tthis.getCommentList(this.postID)\r\n\t\t},\r\n\t\tonReady() {},\r\n\t\tmethods: {\r\n\t\t\t// 点击”回复“按钮\r\n\t\t\tonReplyClick(commentId, username) {\r\n\t\t\t\tthis.replyingCommentId = commentId;\r\n\t\t\t\tthis.replyingTo = username;\r\n\t\t\t\tthis.showPopup = true; // 显示弹窗\r\n\t\t\t\tthis.shouldFocus = true; // 准备聚焦\r\n\t\t\t},\r\n\r\n\t\t\t// 弹窗打开回调\r\n\t\t\thandlePopupOpen() {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t// 确保弹窗渲染完成后再聚焦\r\n\t\t\t\t\tthis.shouldFocus = true;\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 弹窗关闭时重置状态\r\n\t\t\tclosePopup() {\r\n\t\t\t\tthis.showPopup = false;\r\n\t\t\t\tthis.shouldFocus = false;\r\n\t\t\t\tthis.replyingCommentId = null;\r\n\t\t\t\tthis.replyingTo = null;\r\n\t\t\t\tthis.commentPopup = \"\";\r\n\t\t\t},\r\n\t\t\t// 返回tab页面\r\n\t\t\tback() {\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl: '/pages/pet/pet'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t//  收起评论的回复\r\n\t\t\ttoggleReplies(index) {\r\n\t\t\t\t// 切换 true/false\r\n\t\t\t\tthis.$set(this.showReplies, index, !this.showReplies[index]);\r\n\t\t\t},\r\n\r\n\t\t\t// 错误/正确信息提醒\r\n\t\t\tsendToast(type, message) {\r\n\t\t\t\tthis.list.type = type\r\n\t\t\t\tthis.list.message = message\r\n\t\t\t\tthis.showToast(this.list)\r\n\t\t\t},\r\n\t\t\tshowToast(params) {\r\n\t\t\t\tthis.$refs.uToast.show({\r\n\t\t\t\t\t...params,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 删除自己的帖子\r\n\t\t\tasync deleteMyPost(id) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await api.deletePost(id)\r\n\t\t\t\t\tconsole.log(response)\r\n\t\t\t\t\tthis.sendToast('success', '删除帖子成功')\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.back()\r\n\t\t\t\t\t}, 1000)\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\tthis.sendToast('error', '删除帖子失败')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 通用 回复/评论的enter触发\r\n\t\t\tasync handleSubmit({\r\n\t\t\t\ttype\r\n\t\t\t}) {\r\n\t\t\t\t// 防止用户连续点击按钮，多次触发提交操作（防抖）\r\n\t\t\t\tif (this.isSubmitting) return;\r\n\t\t\t\tthis.isSubmitting = true; \r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 判断当前是评论还是回复\r\n\t\t\t\t\tconst isReply = type === 'reply';\r\n\t\t\t\t\t// 如果是回复，获取回复输入框内容；否则获取评论输入框内容\r\n\t\t\t\t\tconst content = isReply ? this.commentPopup : this.comment;\r\n\t\t\t\t\tawait this.submitContent({\r\n\t\t\t\t\t\ttype, // 类型标记：'comment' 或 'reply'\r\n\t\t\t\t\t\tcontent,\r\n\t\t\t\t\t\tpost_id: !isReply ? this.postID : null, // 只有发表评论时需要 post_id\r\n\t\t\t\t\t\tcomment_id: isReply ? this.replyingCommentId : null // 只有回复时需要 comment_id\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (isReply) {\r\n\t\t\t\t\t\tthis.commentPopup = '';\r\n\t\t\t\t\t\tthis.closePopup();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.comment = '';\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 刷新评论列表\r\n\t\t\t\t\tawait this.getCommentList(this.postID);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\t// 释放提交锁\r\n\t\t\t\t\tthis.isSubmitting = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 删除自己的评论接口\r\n\t\t\tasync deleteCommentBtn(id) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await api.deleteComment(id)\r\n\t\t\t\t\tthis.getCommentList(this.postID)\r\n\t\t\t\t\t// console.log(response,\"删除评论成功\")\r\n\t\t\t\t\tthis.sendToast('success', '删除成功(｡í _ ì｡)')\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err, '删除评论失败')\r\n\t\t\t\t\tthis.sendToast('error', '删除失败了哦~ (੭ ᐕ)੭？')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 获取用户id接口\r\n\t\t\tasync getUserInfo() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await api.getUserInfo()\r\n\t\t\t\t\tthis.userId = response.data.id\r\n\t\t\t\t\t// console.log(this.userId)\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 通用回复/评论的方法接口\r\n\t\t\tasync submitContent({\r\n\t\t\t\ttype,\r\n\t\t\t\tcontent,\r\n\t\t\t\tpost_id = null,\r\n\t\t\t\tcomment_id = null\r\n\t\t\t}) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (!content) {\r\n\t\t\t\t\t\tthis.sendToast('error', '不能发送空内容！');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet response;\r\n\r\n\t\t\t\t\tif (type === 'comment') {\r\n\t\t\t\t\t\tresponse = await api.postComment({\r\n\t\t\t\t\t\t\tpost_id,\r\n\t\t\t\t\t\t\tcontent\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (type === 'reply') {\r\n\t\t\t\t\t\tresponse = await api.commentReplies({\r\n\t\t\t\t\t\t\tcomment_id,\r\n\t\t\t\t\t\t\tcontent\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error('未知的提交类型');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconsole.log(response, '发送成功');\r\n\t\t\t\t\tthis.sendToast('success', '评论成功');\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err, '发送失败');\r\n\t\t\t\t\tthis.sendToast('error', '评论失败了哦~ (੭ ᐕ)੭？');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 获取选中帖子接口\r\n\t\t\tasync getPostList(id) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await api.getPost({\r\n\t\t\t\t\t\tpost_id: id\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.posts = response.data\r\n\t\t\t\t\tthis.urls2 = response.data[0].post_pic\r\n\t\t\t\t\tconsole.log(this.posts, '获取帖子成功')\r\n\t\t\t\t\tconsole.log(response.data[0].post_pic, '获取帖子成功')\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err, '获取帖子失败')\r\n\t\t\t\t\tthis.sendToast('error', '获取帖子失败')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 点赞接口\r\n\t\t\tasync addLike(id) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconsole.log(id)\r\n\t\t\t\t\tconst response = await api.addLike({\r\n\t\t\t\t\t\tpost_id: id\r\n\t\t\t\t\t})\r\n\t\t\t\t\tconsole.log(response, '点赞成功')\r\n\t\t\t\t\tthis.sendToast('success', response.message)\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err, '点赞失败')\r\n\t\t\t\t\tthis.sendToast('error', '点赞失败')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 获取评论接口\r\n\t\t\tasync getCommentList(post_id) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await api.getComment(post_id)\r\n\t\t\t\t\tthis.comments = response.data\r\n\t\t\t\t\tthis.total_comments = response.total_comments\r\n\t\t\t\t\tthis.total_replies = response.total_replies\r\n\t\t\t\t\tconsole.log(response.data, '获取评论成功')\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err, '获取评论失败')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 点赞切换效果\r\n\t\t\ttoggleCheck(index, id) {\r\n\t\t\t\tthis.posts[index].liked = !this.posts[index].liked\r\n\t\t\t\t// 切换点赞状态后更新点赞数\r\n\t\t\t\tthis.posts[index].like_count += this.posts[index].liked ? 1 : -1;\r\n\t\t\t\tthis.addLike(id)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n<style scoped lang=\"less\">\r\n\t.content {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tbackground-image: url('https://pet-daily-zm.oss-cn-beijing.aliyuncs.com/background.png');\r\n\t\tbackground-size: cover;\r\n\t\tbackground-position: center;\r\n\t\tbackground-repeat: no-repeat;\r\n\t\tbackground-color: #fffce0;\r\n\t\tpadding-top: 15%;\r\n\t\twidth: 100%;\r\n\t\t// height: 100vh;\r\n\t}\r\n\r\n\t.detail-title {\r\n\t\tfont-size: 38rpx;\r\n\t\tmargin-left: 30rpx;\r\n\t\tposition: relative;\r\n\t\tmargin-right: auto;\r\n\t}\r\n\r\n\t.title {\r\n\t\tfont-size: 40rpx;\r\n\t\tfont-weight: 600;\r\n\t\tmargin-left: 30rpx;\r\n\t\tposition: relative;\r\n\t\tmargin-right: auto;\r\n\t}\r\n\r\n\t.text {\r\n\t\tdisplay: flex;\r\n\t\t// position: relative;\r\n\t\t// display: inline-block;\r\n\t}\r\n\r\n\t.post {\r\n\t\twidth: 90%;\r\n\t\tbackground-color: #fff;\r\n\t\tborder: #000 4rpx solid;\r\n\t\tborder-radius: 20rpx;\r\n\t\tmargin-top: 5%;\r\n\t\tpadding-bottom: 20rpx;\r\n\t}\r\n\r\n\t.post-title {\r\n\t\t// height: 130rpx;\r\n\t\tmargin: 40rpx 40rpx 0rpx 0rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.comment-title {\r\n\t\t// height: 130rpx;\r\n\t\tmargin-top: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.avatar {\r\n\t\theight: 100%;\r\n\t\t// width: 70%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-start;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.comments {\r\n\t\theight: 100%;\r\n\t\tmargin-top: 20rpx;\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-start;\r\n\t}\r\n\r\n\t.avatar-img {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tbackground-color: #000;\r\n\t\tborder-radius: 100rpx;\r\n\t\tborder: #000 2rpx solid;\r\n\t\tmargin-left: 20rpx;\r\n\t}\r\n\r\n\t.avatar-name {\r\n\t\t// width: 60%;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\tmargin-left: 30rpx;\r\n\t}\r\n\r\n\t.comment-name {\r\n\t\twidth: 70%;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\tmargin-left: 30rpx;\r\n\t}\r\n\r\n\t.name-text {\r\n\t\t// width: 80%;\r\n\t\theight: 40%;\r\n\t}\r\n\r\n\t.name-cat {\r\n\t\tfont-size: 28rpx;\r\n\t\t// width: 80%;\r\n\t\theight: 40%;\r\n\t\tcolor: #b0b0b0;\r\n\t}\r\n\r\n\t.time {\r\n\t\twidth: 20%;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.content-text {\r\n\t\tmargin: 20rpx;\r\n\t\tmargin-left: 30rpx;\r\n\t\tline-height: 42rpx;\r\n\r\n\t}\r\n\r\n\t.comment-text {\r\n\t\tmargin: 20rpx 0rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t\tline-height: 42rpx;\r\n\t\tword-wrap: break-word;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.img {\r\n\t\twidth: 90%;\r\n\t\tmargin: auto;\r\n\t}\r\n\r\n\t.image-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tgap: 20rpx;\r\n\t\tjustify-content: flex-start;\r\n\t}\r\n\r\n\t.preview-image {\r\n\t\tflex: 0 0 calc(33.33% - 14rpx);\r\n\t\twidth: calc(33.33% - 14rpx);\r\n\t\theight: 180rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.like {\r\n\t\theight: 80rpx;\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\r\n\t}\r\n\r\n\t.icon {\r\n\t\twidth: 20%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-self: center;\r\n\t}\r\n\r\n\t.icon-img {\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t}\r\n\r\n\t.count {\r\n\t\tmargin-left: 10rpx;\r\n\t}\r\n\r\n\t.fixed {\r\n\r\n\t\twidth: 100%;\r\n\t\theight: 140rpx;\r\n\t\tposition: fixed;\r\n\t\tbottom: -1%;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-top-left-radius: 20rpx;\r\n\t\tborder-top-right-radius: 20rpx;\r\n\t\tborder: #000 solid 4rpx;\r\n\t}\r\n\r\n\t/deep/.u-input {\r\n\t\theight: 80rpx !important;\r\n\t}\r\n\r\n\t// .back-icon::before {\r\n\t// \tcontent: \"<\";\r\n\t// \t/* 直接设置内容 */\r\n\t// \tfont-size: 20px;\r\n\t// \tmargin: 0 20rpx;\r\n\t// }\r\n\r\n\t.sendBtn {\r\n\t\twidth: 100rpx;\r\n\t\theight: 60rpx;\r\n\t\tmargin: 0rpx 20rpx;\r\n\t\tbackground-color: #ffd117;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tcolor: #fff;\r\n\t\tborder-radius: 10rpx;\r\n\t}\r\n\r\n\t.sendBtn:active {\r\n\t\tbackground-color: #eac015;\r\n\t}\r\n\r\n\t.check-comment {\r\n\t\tcolor: #ffd117;\r\n\t\tdisplay: flex;\r\n\t\t// justify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.click-btn {\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tcolor: #999999;\r\n\t}\r\n\r\n\t.click-btn:active {\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tcolor: #707070;\r\n\t}\r\n\r\n\t.img-popup {\r\n\t\tposition: absolute;\r\n\t\tright: 0%;\r\n\t\ttop: -30%;\r\n\t\twidth: 130rpx;\r\n\t\theight: 130rpx;\r\n\r\n\t}\r\n\r\n\t.box-popup {\r\n\t\tpadding: 30rpx 0rpx;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.reply-list {\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #f7f7f7;\r\n\t\tmargin-top: 10rpx;\r\n\t\tpadding: 20rpx 20rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t}\r\n</style>\n","import mod from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./petPost.vue?vue&type=style&index=0&id=11cd2606&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./petPost.vue?vue&type=style&index=0&id=11cd2606&scoped=true&lang=less&\""],"sourceRoot":""}