{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/54771/Desktop/PetDaily/pages/record/recordItems/logbook.vue?f497","webpack:///C:/Users/54771/Desktop/PetDaily/pages/record/recordItems/logbook.vue?9608","webpack:///C:/Users/54771/Desktop/PetDaily/pages/record/recordItems/logbook.vue?926c","webpack:///C:/Users/54771/Desktop/PetDaily/pages/record/recordItems/logbook.vue?335b","uni-app:///pages/record/recordItems/logbook.vue","webpack:///C:/Users/54771/Desktop/PetDaily/pages/record/recordItems/logbook.vue?ab25"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uniNavBar","uIcon","uPicker","uAlbum","uniIcons","uPopup","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","l0","_self","_c","__map","record","item","index","$orig","__get_orig","g0","Array","isArray","note_pic","g1","selectedLog","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","show","showType","showPicker","showData","selectedType","selectedData","petColumns","selectedPetId","selectedPetName","recorded_at","event_type","note","pet_names","pet_pics","selectId","isOpen","searchList","name","typeColumns","dataColumns","columnData","year","month","onReady","methods","onDataConfirm","cancelData","changeHandler","columnIndex","value","values","picker","onTypeConfirm","cancelType","onPetConfirm","selectedIndex","cancelPet","toggleHandler","open","deleteRecord","close","deleteRecordList","api","response","getPet","label","getRecordList","pet_id","eventType","eventDetails","backgroundColor","back","uni","url"],"mappings":"2JAAA,MAGA,aACA,YAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,gFCLX,oIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,uCACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,UAAW,WACT,OAAO,0FAITC,MAAO,WACL,OAAO,iHAITC,QAAS,WACP,OAAO,qHAITC,OAAQ,WACN,OAAO,mHAITC,SAAU,WACR,OAAO,wHAITC,OAAQ,WACN,OAAO,oHAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,MAAMP,EAAIQ,QAAQ,SAAUC,EAAMC,GAC7C,IAAIC,EAAQX,EAAIY,WAAWH,GACvBI,EAAKC,MAAMC,QAAQN,EAAKO,UAC5B,MAAO,CACLL,MAAOA,EACPE,GAAIA,OAGJI,EAAKH,MAAMC,QAAQf,EAAIkB,YAAYF,UACvChB,EAAImB,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLnB,GAAIA,EACJa,GAAIA,MAKRO,GAAmB,EACnBC,EAAkB,GACtB1B,EAAO2B,eAAgB,G,iCC5EvB,yHAAonB,eAAG,G,qLCsHvnB,6lBAEA,CACAN,gBACA,OACAO,QACAC,YACAC,cACAC,YACAC,gBACAC,gBACAC,cACAC,mBACAC,qBACA3B,SACA4B,eACAC,cACAC,QACAC,aACAC,cAEAC,YACAC,UACAC,aACAC,aAEA,CACAA,aAEA,CACAA,cAGAC,aACA,kDAEAC,aACA,mDACA,UAEAC,YACA,SACA,qEACA,qEACA,qEACA,qEACA,qEACA,sEAEA7B,eACA8B,QACAC,WAGAC,mBACA,qBACA,eAEAC,SAEAC,yBACAvD,kCACA,iBACA,wCACA,4BACA,eACA,yBAEA,2CAEA,0CACA,yCACA,sBAGAwD,sBACA,iBACA,0CAGAC,0BACA,IACAC,EAKA7D,EALA6D,YAGA7C,GAEAhB,EAJA8D,MAIA9D,EAHA+D,OAGA/D,EAFAgB,OAAA,EAEAhB,EADAgE,yCAEA7D,mCACA,qBACA,sBAEA,OAEA6D,yCAIAC,0BACA,6BACA,0CACA9D,0BACA,iBACA,yCACA,sBAGA+D,sBACA,iBACA,0CAGAC,yBAEA,gCAAAC,OACAjE,eACA,4BACA,2BACA,6BACAA,kEAEA,mBAEA,yCAEA,6CACA,sBAGAkE,qBACA,mBACA,0CAGAC,0BAEA,yCACAnE,eAEA,MACA,iCACA,MACA,6BACA,QACA,+BAIAoE,iBACA,aACA,gBACApE,eAEA,uDACA,wBAGAqE,wBACArE,oCACA,qCACA,aAEA,sBAGAsE,iBACA,aACA,iBACA,sBAGAC,6BAAA,kJAGAC,0BAAA,OAAAC,OAAA,kDAEAzE,kBAAA,uDALA,IASA0E,kBAAA,mKAEAF,mBAAA,OAAAC,SAEA,eACA,CACAE,aACAhB,aACA,qBACAc,wBAAA,OACAE,aACAhB,kBAIA3D,0BAAA,mDAEAA,kBAAA,wDAjBA,IAqBA4E,yBAAA,0IACA,OAAA5E,2DAAA,kBAEAwE,qBACAK,uBACArC,0BACAW,YACAC,gBACA,OALAqB,SAMAzE,oBAEA,iCACA,SACA,IACA8E,2BACA,SACA9E,mCAGA,SAEA,eACA,SACA+E,kBACAD,oDACA,MACA,SACAC,gCACA,MACA,SACAA,gCACA,MACA,SACAA,mCACA,MACA,SACAA,kBACAD,qMACA,MACA,SACAC,+BACA,MACA,SACAA,kBACAD,6DACA,MACA,SACAC,kBACAD,wIACA,MACA,QACAC,SACA,MAGA,cACAnE,OACAkE,yBACAE,mCACAD,oBAEA,mDAEA/E,kBAAA,wDA/DA,IAkEAiF,gBACAC,aACAC,gCAIA,c,6DCvYA,yHAAupC,eAAG,G","file":"pages/record/recordItems/logbook.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/record/recordItems/logbook.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./logbook.vue?vue&type=template&id=5d01c5f0&scoped=true&\"\nvar renderjs\nimport script from \"./logbook.vue?vue&type=script&lang=js&\"\nexport * from \"./logbook.vue?vue&type=script&lang=js&\"\nimport style0 from \"./logbook.vue?vue&type=style&index=0&id=5d01c5f0&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5d01c5f0\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/record/recordItems/logbook.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./logbook.vue?vue&type=template&id=5d01c5f0&scoped=true&\"","var components\ntry {\n  components = {\n    uniNavBar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar\" */ \"@/uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uPicker: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-picker/u-picker\" */ \"@/uni_modules/uview-ui/components/u-picker/u-picker.vue\"\n      )\n    },\n    uAlbum: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-album/u-album\" */ \"@/uni_modules/uview-ui/components/u-album/u-album.vue\"\n      )\n    },\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-icons/components/uni-icons/uni-icons\" */ \"@/uni_modules/uni-icons/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    uPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-popup/u-popup\" */ \"@/uni_modules/uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.record, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var g0 = Array.isArray(item.note_pic)\n    return {\n      $orig: $orig,\n      g0: g0,\n    }\n  })\n  var g1 = Array.isArray(_vm.selectedLog.note_pic)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        g1: g1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./logbook.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./logbook.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"\">\r\n\t\t<uni-nav-bar left-icon=\"left\" title=\"记录列表\" @clickLeft=\"back\" height=\"160rpx\" />\r\n\t\t<view class=\"search-box\" style=\"\">\r\n\t\t\t<view v-for=\"(item, index) in searchList\" :key=\"index\" class=\"search-item\"\r\n\t\t\t\t:style=\"{ backgroundColor: isOpen[index] ? '#fffce0' : '#fefefe' }\" style=\"search-item\"\r\n\t\t\t\t@click=\"toggleHandler(index)\">\r\n\t\t\t\t<text class=\"btn-text\">\r\n\t\t\t\t\t{{ item.name }}\r\n\t\t\t\t</text>\r\n\t\t\t\t<u-icon name=\"arrow-down\" color=\"#818177\" size=\"15\"></u-icon>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 宠物搜索弹框 -->\r\n\t\t<u-picker :show=\"showPicker\" :columns=\"petColumns\" @confirm=\"onPetConfirm\" v-model=\"selectedPetId\"\r\n\t\t\t@cancel=\"cancelPet\" keyName=\"label\">\r\n\t\t</u-picker>\r\n\t\t<!-- 记事类型搜索弹框 -->\r\n\t\t<u-picker :show=\"showType\" :columns=\"typeColumns\" @confirm=\"onTypeConfirm\" v-model=\"selectedType\"\r\n\t\t\t@cancel=\"cancelType\">\r\n\t\t</u-picker>\r\n\t\t<!-- 时间搜索弹框 -->\r\n\t\t<u-picker :show=\"showData\" :columns=\"dataColumns\" @confirm=\"onDataConfirm\" v-model=\"selectedData\" ref=\"uPicker\"\r\n\t\t\t@change=\"changeHandler\" @cancel=\"cancelData\">\r\n\t\t</u-picker>\r\n\t\t<view class=\"content\">\r\n\r\n\t\t\t<view class=\"log\" v-for=\"(item, index) in record\" :key=\"item.id\">\r\n\t\t\t\t<view class=\"log-header\">\r\n\t\t\t\t\t<!-- 标签 -->\r\n\t\t\t\t\t<view class=\"tips\" :style=\"{ backgroundColor: item.backgroundColor }\">\r\n\t\t\t\t\t\t{{ item.eventType || '' }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 时间 -->\r\n\t\t\t\t\t<view class=\"time\">\r\n\t\t\t\t\t\t{{ item.recorded_at }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"log-content\">\r\n\t\t\t\t\t<view class=\"log-text\">\r\n\t\t\t\t\t\t<view class=\"note\" style=\"color: #8d5515;\" v-html=\"item.eventDetails\">\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"note\">\r\n\t\t\t\t\t\t\t备注： {{ item.note }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"image-container\">\r\n\t\t\t\t\t\t\t<u-album v-if=\"Array.isArray(item.note_pic)\" :urls=\"item.note_pic || []\" rowCount=\"3\"\r\n\t\t\t\t\t\t\t\tmultipleSize=\"80px\" class=\"preview-image\"></u-album>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"pet-container\">\r\n\t\t\t\t\t\t宠物：\r\n\t\t\t\t\t\t<view class=\"pet-pic\" v-for=\"(petImg, index) in item.pet_pics\" :key=\"index\">\r\n\t\t\t\t\t\t\t<img :src=\"petImg\" alt=\"\" class=\"pet-image\">\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"delete-record\" @click=\"open(item.id)\">\r\n\t\t\t\t\t\t<uni-icons type=\"trash\" size=\"25\"></uni-icons>\r\n\t\t\t\t\t\t删除\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 弹窗展示选中的记录内容 -->\r\n\t\t<u-popup :show=\"show\" :round=\"10\" mode=\"bottom\" @close=\"close\" overlayOpacity=\"0.05\" :closeable=\"true\">\r\n\t\t\t<view class=\"\" style=\"padding-bottom: 40rpx;\">\r\n\t\t\t\t<view class=\"\" style=\"font-weight: 36rpx; font-weight: 600; margin:20rpx  40rpx;\">\r\n\t\t\t\t\t确认删除这条记录吗？\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"margin:0rpx  40rpx;border-radius:40rpx;padding-bottom: 20rpx;\">\r\n\t\t\t\t\t<view class=\"log-details\">\r\n\t\t\t\t\t\t<view class=\"log-header\">\r\n\t\t\t\t\t\t\t<view class=\"tips\" :style=\"{ backgroundColor: selectedLog.backgroundColor }\">\r\n\t\t\t\t\t\t\t\t{{ selectedLog.eventType || '' }}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"time\">\r\n\t\t\t\t\t\t\t\t{{ selectedLog.recorded_at }}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<view class=\"log-content\">\r\n\r\n\t\t\t\t\t\t\t<view class=\"log-text\">\r\n\t\t\t\t\t\t\t\t<view class=\"note\" style=\"color: #8d5515;\" v-html=\"selectedLog.eventDetails\"></view>\r\n\t\t\t\t\t\t\t\t<view class=\"note\">\r\n\t\t\t\t\t\t\t\t\t备注： {{ selectedLog.note }}\r\n\t\t\t\t\t\t\t\t</vie\r\n\t\t\t\t\t\t\t\t<view class=\"image-container\">\r\n\t\t\t\t\t\t\t\t\t<u-album v-if=\"Array.isArray(selectedLog.note_pic )\"\r\n\t\t\t\t\t\t\t\t\t\t:urls=\"selectedLog.note_pic || []\" rowCount=\"3\" multipleSize=\"80px\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"preview-image\"></u-album>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t<view class=\"pet-container\">\r\n\t\t\t\t\t\t\t\t宠物：\r\n\t\t\t\t\t\t\t\t<view class=\"pet-pic\" v-for=\"(petImg, index) in selectedLog.pet_pics\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t\t<img :src=\"petImg\" alt=\"\" class=\"pet-image\">\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"\" style=\"display: flex;justify-content: center;\">\r\n\t\t\t\t\t<view class=\"record-book\" @click=\"deleteRecord()\">\r\n\t\t\t\t\t\t确认删除\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport api from '../../../utils/api.js';\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshow: false,\r\n\t\t\t\tshowType: false,\r\n\t\t\t\tshowPicker: false,\r\n\t\t\t\tshowData: false,\r\n\t\t\t\tselectedType: '',\r\n\t\t\t\tselectedData: '',\r\n\t\t\t\tpetColumns: [],\r\n\t\t\t\tselectedPetId: null, // 存储选中的宠物ID\r\n\t\t\t\tselectedPetName: null,\r\n\t\t\t\trecord: [{\r\n\t\t\t\t\trecorded_at: '',\r\n\t\t\t\t\tevent_type: '',\r\n\t\t\t\t\tnote: '',\r\n\t\t\t\t\tpet_names: [],\r\n\t\t\t\t\tpet_pics: []\r\n\t\t\t\t}],\r\n\t\t\t\tselectId: '',\r\n\t\t\t\tisOpen: [],\r\n\t\t\t\tsearchList: [{\r\n\t\t\t\t\t\tname: '宠物搜索',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '日期搜索',\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '类型搜索',\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\ttypeColumns: [\r\n\t\t\t\t\t['全部类型', '饮食', '饮水', '体重', '洗护', '尿便', '记事', '异常', '用药']\r\n\t\t\t\t],\r\n\t\t\t\tdataColumns: [\r\n\t\t\t\t\t['全部年份', '2025', '2024', '2023', '2022', '2021', '2020'],\r\n\t\t\t\t\t['全部月份'],\r\n\t\t\t\t],\r\n\t\t\t\tcolumnData: [\r\n\t\t\t\t\t['全部月份'],\r\n\t\t\t\t\t['全部月份', '01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'],\r\n\t\t\t\t\t['全部月份', '01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'],\r\n\t\t\t\t\t['全部月份', '01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'],\r\n\t\t\t\t\t['全部月份', '01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'],\r\n\t\t\t\t\t['全部月份', '01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'],\r\n\t\t\t\t\t['全部月份', '01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12']\r\n\t\t\t\t],\r\n\t\t\t\tselectedLog: {}, // 新增属性来存储选中的记录\r\n\t\t\t\tyear: '',\r\n\t\t\t\tmonth: ''\r\n\t\t\t};\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis.getRecordList();\r\n\t\t\tthis.getPet()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 日期搜索确认弹框\r\n\t\t\tonDataConfirm() {\r\n\t\t\t\tconsole.log(this.year, this.month)\r\n\t\t\t\tthis.showData = false\r\n\t\t\t\tif (this.month === \"全部月份\" || this.year === '全部年份') {\r\n\t\t\t\t\tthis.selectedData = this.year\r\n\t\t\t\t} else if (this.year === '') {\r\n\t\t\t\t\tthis.selectedData = \"全部年份\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.selectedData = this.year + '-' + this.month\r\n\t\t\t\t}\r\n\t\t\t\tthis.searchList[1].name = this.selectedData\r\n\t\t\t\tthis.$set(this.isOpen, 1, !this.isOpen[1]);\r\n\t\t\t\tthis.getRecordList()\r\n\t\t\t},\r\n\t\t\t// 关闭日期搜索弹框\r\n\t\t\tcancelData() {\r\n\t\t\t\tthis.showData = false\r\n\t\t\t\tthis.$set(this.isOpen, 1, !this.isOpen[1]);\r\n\t\t\t},\r\n\t\t\t// 当日期搜索列数变化的时候，对应变化第二列\r\n\t\t\tchangeHandler(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tcolumnIndex,\r\n\t\t\t\t\tvalue,\r\n\t\t\t\t\tvalues, // values为当前变化列的数组内容\r\n\t\t\t\t\tindex,\r\n\t\t\t\t\tpicker = this.$refs.uPicker\r\n\t\t\t\t} = e\r\n\t\t\t\tconsole.log(e.value[0], e.value[1])\r\n\t\t\t\tthis.year = e.value[0]\r\n\t\t\t\tthis.month = e.value[1]\r\n\t\t\t\t// 当第一列值发生变化时，变化第二列(后一列)对应的选项\r\n\t\t\t\tif (columnIndex === 0) {\r\n\t\t\t\t\t// picker为选择器this实例，变化第二列对应的选项\r\n\t\t\t\t\tpicker.setColumnValues(1, this.columnData[index])\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 记录类似搜索\r\n\t\t\tonTypeConfirm(e) {\r\n\t\t\t\tthis.selectedType = e.value[0]\r\n\t\t\t\tthis.searchList[2].name = this.selectedType\r\n\t\t\t\tconsole.log(e.value[0], e)\r\n\t\t\t\tthis.showType = false\r\n\t\t\t\tthis.$set(this.isOpen, 2, !this.isOpen[2]);\r\n\t\t\t\tthis.getRecordList()\r\n\t\t\t},\r\n\t\t\t// 关闭记录类型搜索弹框\r\n\t\t\tcancelType() {\r\n\t\t\t\tthis.showType = false\r\n\t\t\t\tthis.$set(this.isOpen, 2, !this.isOpen[2]);\r\n\t\t\t},\r\n\t\t\t// 宠物搜索\r\n\t\t\tonPetConfirm(e) {\r\n\t\t\t\t// 获取选中项的索引\r\n\t\t\t\tconst [selectedIndex] = e.indexs\r\n\t\t\t\tconsole.log(selectedIndex)\r\n\t\t\t\tconst selectedPet = this.petColumns[0][selectedIndex]\r\n\t\t\t\tthis.selectedPetId = selectedPet.value\r\n\t\t\t\tthis.selectedPetName = selectedPet.label\r\n\t\t\t\tconsole.log('最终选中的宠物ID:', this.selectedPetId, this.selectedPetName)\r\n\t\t\t\t// 关闭搜索弹框\r\n\t\t\t\tthis.showPicker = false\r\n\t\t\t\t// 修改搜索框的背景颜色\r\n\t\t\t\tthis.$set(this.isOpen, 0, !this.isOpen[0]);\r\n\t\t\t\t// 将宠物名回显在搜索框\r\n\t\t\t\tthis.searchList[0].name = this.selectedPetName\r\n\t\t\t\tthis.getRecordList()\r\n\t\t\t},\r\n\t\t\t// 关闭宠物搜索弹框\r\n\t\t\tcancelPet() {\r\n\t\t\t\tthis.showPicker = false\r\n\t\t\t\tthis.$set(this.isOpen, 0, !this.isOpen[0]);\r\n\t\t\t},\r\n\t\t\t// 选中对应的搜索框切换背景颜色\r\n\t\t\ttoggleHandler(index) {\r\n\t\t\t\t// 切换对应项的背景颜色\r\n\t\t\t\tthis.$set(this.isOpen, index, !this.isOpen[index]);\r\n\t\t\t\tconsole.log(index)\r\n\t\t\t\t// 打开宠物搜索弹框\r\n\t\t\t\tif (index === 0) {\r\n\t\t\t\t\tthis.showPicker = !this.showPicker\r\n\t\t\t\t} else if (index === 1) {\r\n\t\t\t\t\tthis.showData = !this.showData\r\n\t\t\t\t} else if (index === 2) {\r\n\t\t\t\t\tthis.showType = !this.showType\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 打开删除弹框\r\n\t\t\topen(id) {\r\n\t\t\t\tthis.show = true;\r\n\t\t\t\tthis.selectId = id;\r\n\t\t\t\tconsole.log(id)\r\n\t\t\t\t// 查找选中的记录并保存到 selectedLog\r\n\t\t\t\tconst selectedRecord = this.record.find(item => item.id === id);\r\n\t\t\t\tthis.selectedLog = selectedRecord || {}; \r\n\t\t\t},\r\n\t\t\t// 删除记录\r\n\t\t\tdeleteRecord() {\r\n\t\t\t\tconsole.log(this.selectId, '777777')\r\n\t\t\t\tthis.deleteRecordList(this.selectId)\r\n\t\t\t\tthis.show = false;\r\n\t\t\t\t// this.selectId = '';\r\n\t\t\t\tthis.getRecordList()\r\n\t\t\t},\r\n\t\t\t// 关闭删除弹框\r\n\t\t\tclose() {\r\n\t\t\t\tthis.show = false;\r\n\t\t\t\tthis.selectId = '';\r\n\t\t\t\tthis.getRecordList();\r\n\t\t\t},\r\n\t\t\t// 删除接口\r\n\t\t\tasync deleteRecordList(id) {\r\n\t\t\t\t// console.log(id, '000000')\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await api.deleteRecord(id)\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//获取宠物信息\r\n\t\t\tasync getPet() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await api.getPet();\r\n\t\t\t\t\t// 直接处理 petColumns 数据，添加“全部”选项\r\n\t\t\t\t\tthis.petColumns = [\r\n\t\t\t\t\t\t[{\r\n\t\t\t\t\t\t\t\tlabel: \"全部宠物\",\r\n\t\t\t\t\t\t\t\tvalue: null\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t...response.data.map(pet => ({\r\n\t\t\t\t\t\t\t\tlabel: pet.name,\r\n\t\t\t\t\t\t\t\tvalue: pet.id\r\n\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t];\r\n\t\t\t\t\tconsole.log(this.petColumns);\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 获取/搜索记录事项\r\n\t\t\tasync getRecordList() {\r\n\t\t\t\tconsole.log(this.selectedPetId, this.selectedType, this.year, this.month);\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst response = await api.getRecord({\r\n\t\t\t\t\t\tpet_id: this.selectedPetId,\r\n\t\t\t\t\t\tevent_type: this.selectedType,\r\n\t\t\t\t\t\tyear: this.year,\r\n\t\t\t\t\t\tmonth: this.month\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.log(response.data);\r\n\r\n\t\t\t\t\tthis.record = response.data.map(item => {\r\n\t\t\t\t\t\tlet eventType = {};\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\teventType = JSON.parse(item.event_type); // 解析 event_type 字符串\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tconsole.error(\"event_type 解析失败\", e);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet eventDetails = '';\r\n\t\t\t\t\t\t// 使用 switch case 来处理不同的 eventType.type\r\n\t\t\t\t\t\tswitch (eventType.type) {\r\n\t\t\t\t\t\t\tcase '饮食':\r\n\t\t\t\t\t\t\t\teventDetails =\r\n\t\t\t\t\t\t\t\t\t`食物类型: ${eventType.foodType}<br>进食量: ${eventType.foodAmount}<br>`;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase '饮水':\r\n\t\t\t\t\t\t\t\teventDetails = `饮水量: ${eventType.drinkAmount}`;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase '体重':\r\n\t\t\t\t\t\t\t\teventDetails = `体重: ${eventType.weightAmount}`;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase '洗护':\r\n\t\t\t\t\t\t\t\teventDetails = `洗护类型: ${eventType.cleansingType}`;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase '尿便':\r\n\t\t\t\t\t\t\t\teventDetails =\r\n\t\t\t\t\t\t\t\t\t`排泄类型: ${eventType.stoolType}<br>排泄频率: ${eventType.stoolFrequency}<br>排泄量: ${eventType.stoolAmount}<br>尿便状态: ${eventType.stoolStatus}<br>尿便颜色: ${eventType.stoolColor}<br>尿便异常: ${eventType.stoolUnusual}<br>`;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase '记事':\r\n\t\t\t\t\t\t\t\teventDetails = `记录类型: ${eventType.notesType}`;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase '异常':\r\n\t\t\t\t\t\t\t\teventDetails =\r\n\t\t\t\t\t\t\t\t\t`异常类型: ${eventType.abnormalType}<br>异常细节: ${eventType.abnormalDetail}<br>`;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase '用药':\r\n\t\t\t\t\t\t\t\teventDetails =\r\n\t\t\t\t\t\t\t\t\t`用药类型: ${eventType.medicationType},${eventType.medicationDetail}<br>给药方式: ${eventType.medicationMethod}<br>药物用量: ${eventType.medicationAmount}<br>`;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\teventDetails = '未知事件';\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t\teventType: eventType.type || '默认类型',\r\n\t\t\t\t\t\t\tbackgroundColor: eventType.color || '#4f6df9',\r\n\t\t\t\t\t\t\teventDetails: eventDetails\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tback() {\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl: '/pages/record/record'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t.content {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tbackground-image: url('https://pet-daily-zm.oss-cn-beijing.aliyuncs.com/background.png');\r\n\t\tbackground-size: cover;\r\n\t\tbackground-position: center;\r\n\t\tbackground-repeat: no-repeat;\r\n\t\tbackground-color: #fffce0;\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t}\r\n\r\n\t.log {\r\n\t\twidth: 90%;\r\n\t\tbackground-color: #fefefe;\r\n\t\tborder-radius: 40rpx;\r\n\t\tmargin-bottom: 40rpx;\r\n\t}\r\n\r\n\t.log-header {\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t.tips {\r\n\t\twidth: 120rpx;\r\n\t\theight: 60rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tborder-bottom-left-radius: 0rpx;\r\n\t\tborder-top-right-radius: 0rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.time {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #754712;\r\n\t\tmargin-left: 40rpx;\r\n\t}\r\n\r\n\t.log-content {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.log-text {\r\n\t\twidth: 85%;\r\n\t\tborder-radius: 40rpx;\r\n\t\tpadding: 0rpx 20rpx;\r\n\t\tmargin: 20rpx 0rpx;\r\n\t\tbackground-color: #f8f9f4;\r\n\t}\r\n\r\n\t.note {\r\n\t\tmargin: 20rpx 0rpx;\r\n\t}\r\n\r\n\t.image-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tgap: 20rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t\tjustify-content: flex-start;\r\n\t}\r\n\r\n\t.preview-image {\r\n\t\tflex: 0 0 calc(33.33% - 14rpx);\r\n\t\twidth: calc(33.33% - 14rpx);\r\n\t\theight: 180rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.pet-container {\r\n\t\twidth: 85%;\r\n\t\tborder-radius: 40rpx;\r\n\t\tfont-weight: 600;\r\n\t\tcolor: #754712;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.pet-pic {\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t.pet-image {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 100rpx;\r\n\t}\r\n\r\n\r\n\t.delete-record {\r\n\t\twidth: 85%;\r\n\t\tpadding: 0rpx 0rpx 20rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: flex-end;\r\n\t}\r\n\r\n\t.record-book {\r\n\t\twidth: 80%;\r\n\t\theight: 100rpx;\r\n\t\tmargin-top: 30rpx;\r\n\t\tborder: #000 4rpx solid;\r\n\t\tbackground-color: #ffd553;\r\n\t\tborder-radius: 100rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\tfont-weight: 600;\r\n\t\tfont-size: 34rpx;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.record-book:active {\r\n\t\tbackground-color: #eac34c;\r\n\t}\r\n\r\n\t/deep/.uni-navbar__header-container-inner {\r\n\t\talign-items: flex-end !important;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t/deep/.uni-navbar__header-btns-left {\r\n\t\talign-items: flex-end !important;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t/deep/.uni-navbar--border {\r\n\t\tborder-bottom-color: #ffe68c !important;\r\n\t}\r\n\r\n\t/deep/.uni-navbar__header {\r\n\t\tbackground-color: #ffe68c !important;\r\n\t}\r\n\r\n\t/* 文字样式 */\r\n\t.btn-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #818177;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.search-box {\r\n\t\theight: 120rpx;\r\n\t\tbackground-color: #ffe78f;\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.search-item {\r\n\t\twidth: 30%;\r\n\t\theight: 70rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-evenly\r\n\t}\r\n</style>\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./logbook.vue?vue&type=style&index=0&id=5d01c5f0&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./logbook.vue?vue&type=style&index=0&id=5d01c5f0&lang=less&scoped=true&\""],"sourceRoot":""}