<view class="content data-v-11cd2606"><view class="detail-title data-v-11cd2606"><view data-event-opts="{{[['tap',[['back',['$event']]]]]}}" class="text data-v-11cd2606" bindtap="__e"><u-icon vue-id="27d81bc0-1" color="#000" size="20" name="arrow-left" class="data-v-11cd2606" bind:__l="__l"></u-icon><view style="margin-left:30rpx;" class="data-v-11cd2606">帖子详情</view></view></view><block wx:for="{{posts}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="post data-v-11cd2606"><view class="post-title data-v-11cd2606"><view class="avatar data-v-11cd2606"><image class="avatar-img _img data-v-11cd2606" src="{{item.user_pic}}" alt></image><view class="avatar-name data-v-11cd2606"><view class="name-text data-v-11cd2606">{{''+item.username+''}}</view><view class="name-cat data-v-11cd2606">{{''+item.created_at+''}}</view></view></view></view><view class="content-text data-v-11cd2606"><u--text vue-id="{{'27d81bc0-2-'+index}}" margin="0 0 8px 0" text="{{item.content}}" class="data-v-11cd2606" bind:__l="__l"></u--text></view><view class="img data-v-11cd2606"><u-album vue-id="{{'27d81bc0-3-'+index}}" urls="{{urls2}}" rowCount="3" multipleSize="80px" class="data-v-11cd2606" bind:__l="__l"></u-album></view><view class="like data-v-11cd2606"><block wx:if="{{userId===item.user_id}}"><view data-event-opts="{{[['tap',[['deleteMyPost',['$0'],[[['posts','',index,'id']]]]]]]}}" class="icon data-v-11cd2606" bindtap="__e"><u-icon vue-id="{{'27d81bc0-4-'+index}}" size="20" name="trash" color="#000" class="data-v-11cd2606" bind:__l="__l"></u-icon><label class="_span data-v-11cd2606">删除</label></view></block><view data-event-opts="{{[['tap',[['toggleCheck',[index,'$0'],[[['posts','',index,'id']]]]]]]}}" class="icon data-v-11cd2606" catchtap="__e"><image class="icon-img _img data-v-11cd2606" src="{{item.liked?'../../static/dianzan_1.png':'../../static/dianzan.png'}}"></image><view class="count data-v-11cd2606">{{''+item.like_count+''}}</view></view></view></view></block><view class="post data-v-11cd2606" style="margin-bottom:200rpx;"><view class="title data-v-11cd2606"><view class="text data-v-11cd2606" style="margin:20rpx 0rpx;">{{'评论 '+(total_comments+total_replies)+''}}</view></view><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="comment-title data-v-11cd2606"><view class="comments data-v-11cd2606"><image class="avatar-img _img data-v-11cd2606" src="{{item.$orig.user_pic}}" alt></image><view class="comment-name data-v-11cd2606"><view class="name-text data-v-11cd2606" style="color:#3f3f3f;">{{''+item.$orig.username+''}}</view><view class="name-cat data-v-11cd2606">{{''+item.$orig.comment_created_at+''}}</view><view class="comment-text data-v-11cd2606">{{''+item.$orig.comment_content+''}}</view><view style="display:flex;" class="data-v-11cd2606"><view data-event-opts="{{[['tap',[['onReplyClick',['$0','$1'],[[['comments','',index,'comment_id']],[['comments','',index,'username']]]]]]]}}" class="click-btn data-v-11cd2606" style="margin-right:30rpx;" bindtap="__e"><u-icon vue-id="{{'27d81bc0-5-'+index}}" size="18" name="chat" class="data-v-11cd2606" bind:__l="__l"></u-icon><label class="_span data-v-11cd2606">回复</label></view><view hidden="{{!(userId===item.$orig.comment_user_id)}}" class="data-v-11cd2606"><view data-event-opts="{{[['tap',[['deleteCommentBtn',['$0'],[[['comments','',index,'comment_id']]]]]]]}}" class="click-btn data-v-11cd2606" bindtap="__e"><u-icon vue-id="{{'27d81bc0-6-'+index}}" size="18" name="trash" class="data-v-11cd2606" bind:__l="__l"></u-icon><label class="_span data-v-11cd2606">删除</label></view></view></view><block wx:if="{{item.g0>0}}"><view data-event-opts="{{[['tap',[['toggleReplies',[index]]]]]}}" class="check-comment data-v-11cd2606" bindtap="__e">{{''+(showReplies[index]?'点击收起回复':'点击查看回复')+''}}<u-icon vue-id="{{'27d81bc0-7-'+index}}" size="20" name="{{showReplies[index]?'arrow-up-fill':'arrow-down-fill'}}" color="#ffd117" class="data-v-11cd2606" bind:__l="__l"></u-icon></view></block><block wx:if="{{showReplies[index]}}"><view class="reply-list data-v-11cd2606"><block wx:for="{{item.$orig.replies}}" wx:for-item="reply" wx:for-index="index" wx:key="id"><view style="margin-bottom:10rpx;" class="data-v-11cd2606"><label style="color:#ffa915;margin-right:10rpx;" class="_span data-v-11cd2606">{{reply.username+":"}}</label><label style="color:#3f3f3f;" class="_span data-v-11cd2606">{{''+reply.reply_content}}</label></view></block></view></block></view></view></view></block></view><u-toast vue-id="27d81bc0-8" data-ref="uToast" class="data-v-11cd2606 vue-ref" bind:__l="__l"></u-toast><view class="fixed data-v-11cd2606"><u--input vue-id="27d81bc0-9" placeholder="快来发表评论吧!(ง •_•)ง" suffixIconStyle="color: #909399" value="{{comment}}" data-event-opts="{{[['^confirm',[['handleSubmit',[['o',['type','comment']]]]]],['^input',[['__set_model',['','comment','$event',[]]]]]]}}" bind:confirm="__e" bind:input="__e" class="data-v-11cd2606" bind:__l="__l"></u--input></view><u-popup vue-id="27d81bc0-10" show="{{showPopup}}" round="{{10}}" closeOnClickOverlay="true" overlayOpacity="0.1" data-event-opts="{{[['^close',[['closePopup']]],['^open',[['handlePopupOpen']]]]}}" bind:close="__e" bind:open="__e" class="data-v-11cd2606" bind:__l="__l" vue-slots="{{['default']}}"><view class="box-popup data-v-11cd2606"><image class="img-popup _img data-v-11cd2606" src="https://www.serverzhu.com/petImg/%E7%BB%84%2034.png"></image><u--input vue-id="{{('27d81bc0-11')+','+('27d81bc0-10')}}" placeholder="{{'回复 '+replyingTo+' 的评论...'}}" suffixIconStyle="color: #909399" focus="{{shouldFocus}}" showConfirmBar="{{false}}" value="{{commentPopup}}" data-event-opts="{{[['^confirm',[['handleSubmit',[['o',['type','reply']]]]]],['^input',[['__set_model',['','commentPopup','$event',[]]]]]]}}" bind:confirm="__e" bind:input="__e" class="data-v-11cd2606" bind:__l="__l"></u--input></view></u-popup></view>