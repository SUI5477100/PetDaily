(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/record/components/picturesTextPost"],{242:function(e,n,t){"use strict";(function(e,n){var r=t(4);t(26);r(t(25));var o=r(t(243));e.__webpack_require_UNI_MP_PLUGIN__=t,n(o.default)}).call(this,t(1)["default"],t(2)["createPage"])},243:function(e,n,t){"use strict";t.r(n);var r=t(244),o=t(246);for(var i in o)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(i);t(248);var u,a=t(32),s=Object(a["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,"701ea696",null,!1,r["components"],u);s.options.__file="pages/record/components/picturesTextPost.vue",n["default"]=s.exports},244:function(e,n,t){"use strict";t.r(n);var r=t(245);t.d(n,"render",(function(){return r["render"]})),t.d(n,"staticRenderFns",(function(){return r["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return r["recyclableRender"]})),t.d(n,"components",(function(){return r["components"]}))},245:function(e,n,t){"use strict";var r;t.r(n),t.d(n,"render",(function(){return o})),t.d(n,"staticRenderFns",(function(){return u})),t.d(n,"recyclableRender",(function(){return i})),t.d(n,"components",(function(){return r}));try{r={uniNavBar:function(){return t.e("uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar").then(t.bind(null,476))},uniEasyinput:function(){return t.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(t.bind(null,432))},uniFilePicker:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-file-picker/components/uni-file-picker/uni-file-picker")]).then(t.bind(null,483))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var e=this,n=e.$createElement;e._self._c},i=!1,u=[];o._withStripped=!0},246:function(e,n,t){"use strict";t.r(n);var r=t(247),o=t.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(i);n["default"]=o.a},247:function(e,n,t){"use strict";(function(e){var r=t(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(t(56)),i=r(t(58)),u=r(t(18)),a=r(t(170)),s={data:function(){return{description:"",uploadedUrls:[],fileLists:[],imageStyles:{border:{color:"#f1f1f1",width:2,radius:"20rpx"}}}},methods:{back:function(){e.switchTab({url:"/pages/pet/pet"})},onFileSelect:function(e){this.fileLists=[].concat((0,u.default)(this.fileLists),(0,u.default)(e.tempFiles))},sendPost:function(){var e=this;return(0,i.default)(o.default.mark((function n(){var t;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.upload();case 3:return n.next=5,a.default.sendPost({content:e.description,post_pic:e.uploadedUrls});case 5:t=n.sent,console.log(t,"发送帖子结果"),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](0),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})))()},upload:function(){var n=this;return(0,i.default)(o.default.mark((function t(){var r,i,a,s,c,l;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.fileLists.length){t.next=2;break}return t.abrupt("return",e.showToast({title:"请先选择图片",icon:"none"}));case 2:n.uploadedUrls=[],e.showLoading({title:"上传中..."}),t.prev=4,r=0;case 6:if(!(r<n.fileLists.length)){t.next=17;break}return a=n.fileLists[r],t.next=10,e.uploadFile({url:"https://serverzhu.com:3000/upload",filePath:a.path,name:"file"});case 10:s=t.sent,c=JSON.parse(s.data),l=c.data.url,(i=n.uploadedUrls).push.apply(i,(0,u.default)(l));case 14:r++,t.next=6;break;case 17:console.log("所有上传成功的图片地址:",n.uploadedUrls),e.hideLoading(),e.showToast({title:"上传成功",icon:"success"}),t.next=27;break;case 22:t.prev=22,t.t0=t["catch"](4),e.hideLoading(),console.error("上传失败:",t.t0),e.showToast({title:"上传失败",icon:"none"});case 27:case"end":return t.stop()}}),t,null,[[4,22]])})))()}}};n.default=s}).call(this,t(2)["default"])},248:function(e,n,t){"use strict";t.r(n);var r=t(249),o=t.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(i);n["default"]=o.a},249:function(e,n,t){}},[[242,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/record/components/picturesTextPost.js.map