(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/record/recordItems/logbook"],{264:function(e,t,n){"use strict";(function(e,t){var o=n(4);n(26);o(n(25));var r=o(n(265));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n(1)["default"],n(2)["createPage"])},265:function(e,t,n){"use strict";n.r(t);var o=n(266),r=n(268);for(var s in r)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(s);n(270);var c,i=n(32),a=Object(i["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,"5d01c5f0",null,!1,o["components"],c);a.options.__file="pages/record/recordItems/logbook.vue",t["default"]=a.exports},266:function(e,t,n){"use strict";n.r(t);var o=n(267);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},267:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return c})),n.d(t,"recyclableRender",(function(){return s})),n.d(t,"components",(function(){return o}));try{o={uniNavBar:function(){return n.e("uni_modules/uni-nav-bar/components/uni-nav-bar/uni-nav-bar").then(n.bind(null,449))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,389))},uPicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-picker/u-picker")]).then(n.bind(null,519))},uAlbum:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-album/u-album")]).then(n.bind(null,381))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,527))},uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,535))}}}catch(i){if(-1===i.message.indexOf("Cannot find module")||-1===i.message.indexOf(".vue"))throw i;console.error(i.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.record,(function(t,n){var o=e.__get_orig(t),r=Array.isArray(t.note_pic);return{$orig:o,g0:r}}))),o=Array.isArray(e.selectedLog.note_pic);e.$mp.data=Object.assign({},{$root:{l0:n,g1:o}})},s=!1,c=[];r._withStripped=!0},268:function(e,t,n){"use strict";n.r(t);var o=n(269),r=n.n(o);for(var s in o)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=r.a},269:function(e,t,n){"use strict";(function(e){var o=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(56)),s=o(n(11)),c=o(n(18)),i=o(n(58)),a=o(n(5)),u=o(n(173));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={data:function(){return{show:!1,showType:!1,showPicker:!1,showData:!1,selectedType:"",selectedData:"",petColumns:[],selectedPetId:null,selectedPetName:null,record:[{recorded_at:"",event_type:"",note:"",pet_names:[],pet_pics:[]}],selectId:"",isOpen:[],searchList:[{name:"宠物搜索"},{name:"日期搜索"},{name:"类型搜索"}],typeColumns:[["全部类型","饮食","饮水","体重","洗护","尿便","记事","异常","用药"]],dataColumns:[["全部年份","2025","2024","2023","2022","2021","2020"],["全部月份"]],columnData:[["全部月份"],["全部月份","01","02","03","04","05","06","07","08","09","10","11","12"],["全部月份","01","02","03","04","05","06","07","08","09","10","11","12"],["全部月份","01","02","03","04","05","06","07","08","09","10","11","12"],["全部月份","01","02","03","04","05","06","07","08","09","10","11","12"],["全部月份","01","02","03","04","05","06","07","08","09","10","11","12"],["全部月份","01","02","03","04","05","06","07","08","09","10","11","12"]],selectedLog:{},year:"",month:""}},onReady:function(){this.getRecordList(),this.getPet()},methods:{onDataConfirm:function(){console.log(this.year,this.month),this.showData=!1,"全部月份"===this.month||"全部年份"===this.year?this.selectedData=this.year:""===this.year?this.selectedData="全部年份":this.selectedData=this.year+"-"+this.month,this.searchList[1].name=this.selectedData,this.$set(this.isOpen,1,!this.isOpen[1]),this.getRecordList()},cancelData:function(){this.showData=!1,this.$set(this.isOpen,1,!this.isOpen[1])},changeHandler:function(e){var t=e.columnIndex,n=(e.value,e.values,e.index),o=e.picker,r=void 0===o?this.$refs.uPicker:o;console.log(e.value[0],e.value[1]),this.year=e.value[0],this.month=e.value[1],0===t&&r.setColumnValues(1,this.columnData[n])},onTypeConfirm:function(e){this.selectedType=e.value[0],this.searchList[2].name=this.selectedType,console.log(e.value[0],e),this.showType=!1,this.$set(this.isOpen,2,!this.isOpen[2]),this.getRecordList()},cancelType:function(){this.showType=!1,this.$set(this.isOpen,2,!this.isOpen[2])},onPetConfirm:function(e){var t=(0,a.default)(e.indexs,1),n=t[0];console.log(n);var o=this.petColumns[0][n];this.selectedPetId=o.value,this.selectedPetName=o.label,console.log("最终选中的宠物ID:",this.selectedPetId,this.selectedPetName),this.showPicker=!1,this.$set(this.isOpen,0,!this.isOpen[0]),this.searchList[0].name=this.selectedPetName,this.getRecordList()},cancelPet:function(){this.showPicker=!1,this.$set(this.isOpen,0,!this.isOpen[0])},toggleHandler:function(e){this.$set(this.isOpen,e,!this.isOpen[e]),console.log(e),0===e?this.showPicker=!this.showPicker:1===e?this.showData=!this.showData:2===e&&(this.showType=!this.showType)},open:function(e){this.show=!0,this.selectId=e,console.log(e);var t=this.record.find((function(t){return t.id===e}));this.selectedLog=t||{}},deleteRecord:function(){console.log(this.selectId,"777777"),this.deleteRecordList(this.selectId),this.show=!1,this.getRecordList()},close:function(){this.show=!1,this.selectId="",this.getRecordList()},deleteRecordList:function(e){return(0,i.default)(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.default.deleteRecord(e);case 3:t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},getPet:function(){var e=this;return(0,i.default)(r.default.mark((function t(){var n;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.default.getPet();case 3:n=t.sent,e.petColumns=[[{label:"全部宠物",value:null}].concat((0,c.default)(n.data.map((function(e){return{label:e.name,value:e.id}}))))],console.log(e.petColumns),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getRecordList:function(){var e=this;return(0,i.default)(r.default.mark((function t(){var n;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.selectedPetId,e.selectedType,e.year,e.month),t.prev=1,t.next=4,u.default.getRecord({pet_id:e.selectedPetId,event_type:e.selectedType,year:e.year,month:e.month});case 4:n=t.sent,console.log(n.data),e.record=n.data.map((function(e){var t={};try{t=JSON.parse(e.event_type)}catch(o){console.error("event_type 解析失败",o)}var n="";switch(t.type){case"饮食":n="食物类型: ".concat(t.foodType,"<br>进食量: ").concat(t.foodAmount,"<br>");break;case"饮水":n="饮水量: ".concat(t.drinkAmount);break;case"体重":n="体重: ".concat(t.weightAmount);break;case"洗护":n="洗护类型: ".concat(t.cleansingType);break;case"尿便":n="排泄类型: ".concat(t.stoolType,"<br>排泄频率: ").concat(t.stoolFrequency,"<br>排泄量: ").concat(t.stoolAmount,"<br>尿便状态: ").concat(t.stoolStatus,"<br>尿便颜色: ").concat(t.stoolColor,"<br>尿便异常: ").concat(t.stoolUnusual,"<br>");break;case"记事":n="记录类型: ".concat(t.notesType);break;case"异常":n="异常类型: ".concat(t.abnormalType,"<br>异常细节: ").concat(t.abnormalDetail,"<br>");break;case"用药":n="用药类型: ".concat(t.medicationType,",").concat(t.medicationDetail,"<br>给药方式: ").concat(t.medicationMethod,"<br>药物用量: ").concat(t.medicationAmount,"<br>");break;default:n="未知事件";break}return d(d({},e),{},{eventType:t.type||"默认类型",backgroundColor:t.color||"#4f6df9",eventDetails:n})})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},back:function(){e.switchTab({url:"/pages/record/record"})}}};t.default=h}).call(this,n(2)["default"])},270:function(e,t,n){"use strict";n.r(t);var o=n(271),r=n.n(o);for(var s in o)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(s);t["default"]=r.a},271:function(e,t,n){}},[[264,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/record/recordItems/logbook.js.map